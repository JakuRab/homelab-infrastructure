networks:
  caddy_net:
    external: true

services:
  smartctl-exporter:
    image: prometheuscommunity/smartctl-exporter:v0.12.0
    container_name: smartctl-exporter
    restart: unless-stopped
    ports:
      - "9633:9633"
    devices:
      - /dev:/dev:ro
    cap_add:
      - SYS_RAWIO
      - SYS_ADMIN
    security_opt:
      - no-new-privileges:true
    privileged: false
    networks:
      - caddy_net
    labels:
      glance.name: "Smartctl Exporter"
      glance.icon: "mdi:harddisk"
    environment:
      # Scan interval in seconds (how often to refresh SMART data)
      - SMARTCTL_REFRESH_INTERVAL=60
      # Scan devices on startup
      - SMARTCTL_SCAN_ON_START=true
