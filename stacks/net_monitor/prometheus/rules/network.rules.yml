groups:
  - name: blackbox-alerts
    rules:
      - alert: BlackboxProbeFailure
        expr: probe_success == 0
        for: 45s
        labels:
          severity: critical
        annotations:
          summary: "Probe failed ({{ $labels.instance }})"
          description: "Blackbox probe to {{ $labels.instance }} using {{ $labels.module }} has been failing for at least 45 seconds."

      - alert: HighRoundTripTime
        expr: |
          avg_over_time(probe_duration_seconds{module="icmp"}[5m]) > 0.25
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High latency ({{ $labels.instance }})"
          description: "Average probe duration has stayed above 250ms for the last 5 minutes."
